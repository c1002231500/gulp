define(function(s,n,l){var o=s("cons"),e=s("./anchor-list"),i=s("./anchor-tools");l.exports={anchors:{},init:function(){$("#addFav2").on("click",function(){if(!UIF.handler.login)return void UIF.handler.loging();var s=UIF.handler.cache.get(o.USER_HEADINFOS);null!=s&&1==s.isFollows?i.dialog("取消关注将清除亲密等级！",function(s){UIF.handler.follow({},function(s){s=jQuery.parseJSON(s),200==s.resultStatus&&0==s.isFollows&&$("#isfollow1").show().siblings("#isfollow0").hide()})},function(s){}):UIF.handler.follow({},function(s){s=jQuery.parseJSON(s),200==s.resultStatus&&1==s.isFollows&&$("#isfollow0").show().siblings("#isfollow1").hide()})})},onMessage:function(s){this.anchors=s,this.onLoad()},onLoad:function(){this.onHeads()},onHeads:function(){if(null!=this.anchors&&null!=this.anchors.followNumber&&$(".live-info .self-level .level-margin-area .l-xin").text(this.anchors.followNumber),null!=this.anchors&&null!=this.anchors.heatNumber&&$(".live-info .self-level .level-margin-area .l-fire").text(this.anchors.heatNumber),null!=this.anchors&&null!=this.anchors.numbers&&$(".live-info .s-else .s-people").text(this.anchors.numbers),null!=this.anchors&&null!=this.anchors.city&&$(".live-info .self-name .s-else .s-position").text(this.anchors.city),null!=this.anchors&&null!=this.anchors.nickname&&$(".live-info .self-name .anchor-info-names").text(decodeURI(this.anchors.nickname)),null!=this.anchors&&null!=this.anchors.dc&&$(".lhaicha").text("升级还差"+this.anchors.dc+"经验值"),null!=this.anchors&&null!=this.anchors.nc&&$(".lvinner").css("width",this.anchors.nc+"%"),$(".toggleBox .viewer>span").text(this.anchors.numbers),$(".s-name .anchor-level").removeClass().addClass("anchor-level").addClass(this.anchors.il),$(".lhaicha").siblings("span").removeClass().addClass("anchor-level-next").addClass("anchor-level").addClass(this.anchors.inl),UIF.handler.cache.remove(o.ANCHOR_HEADINFOS),UIF.handler.cache.put(o.ANCHOR_HEADINFOS,this.anchors),null!=this.anchors&&null!=this.anchors.userList&&this.anchors.userList.length>0)for(var s=this.anchors.userList,n=0;n<s.length;n++){var l=s[n];e.addUsers(l)}}}});