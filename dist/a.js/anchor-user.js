define(function(a,t,e){var i=a("cons"),n=a("./anchor-gift"),r=a("./anchor-tools");e.exports={data:{},upgrade:function(a){1==a.upgrade&&(self.location="/html/120.html")},meters:function(a){this.data=a,this.init(),"qqgame_built"!=UIF.skinType&&(this.menus(),this.startMenu())},startMenu:function(){$(".guard-area").draggable({containment:"parent",stop:function(){var a=$(".guard-area").attr("style");UIF.setCookie("guard-area",a,86400)}}),$(".guard-area").resizable({alsoResize:".guard-main",minHeight:150,minWidth:208,stop:function(){var a=$(".guard-area").attr("style");UIF.setCookie("guard-area",a,86400)}}),$(".rank-area").draggable({containment:"parent",stop:function(){var a=$(".rank-area").attr("style");UIF.setCookie("rank-area",a,86400)}}),$(".rank-area").resizable({alsoResize:".rk-con1,.rk-con2,.rk-con3",minHeight:150,minWidth:208,stop:function(){var a=$(".rank-area").attr("style");UIF.setCookie("rank-area",a,86400)}}),$(".gift-record").draggable({containment:"parent",cancel:"#span",stop:function(){var a=$(".gift-record").attr("style");UIF.setCookie("gift-record",a,86400)}}),$(".gift-record").resizable({alsoResize:".gr-main",minHeight:150,minWidth:208,stop:function(){var a=$(".gift-record").attr("style");UIF.setCookie("gift-record",a,86400)}}),$(".visitant-record").draggable({containment:"parent",cancel:"#span",stop:function(){var a=$(".visitant-record").attr("style");UIF.setCookie("visitant-record",a,86400)}}),$(".visitant-record").resizable({alsoResize:".vr-main",minHeight:150,minWidth:208,stop:function(){var a=$(".visitant-record").attr("style");UIF.setCookie("visitant-record",a,86400)}}),$(".chat-area").draggable({containment:"parent",cancel:".hrr,input",stop:function(){var a=$(".chat-area").attr("style");UIF.setCookie("chat-area",a,86400)}}),$(".chat-area").resizable({alsoResize:".cr-body,#msgContent",minHeight:530,minWidth:340,stop:function(){var a=$(".chat-area").attr("style");UIF.setCookie("chat-area",a,86400)}}),$(".chat-area").on("resizestop",function(a,t){$("#nano-pubChatList").nanoScroller(),$("#nano-pubChatList").nanoScroller({scroll:"bottom"})})},menus:function(){var t=this,e=a("map"),i=new e;i.put("sw-guard","guard-area"),i.put("sw-chat","chat-area"),i.put("sw-record","gift-record"),i.put("sw-rank","rank-area"),i.put("sw-vip","visitant-record");for(var n=0;n<i.size();n++){var s=i.elements[n];if(null!=s){t.swc(s.key,s.value);var l=r.getCookie(s.key+"-cook"),o=r.getCookie(s.value);null!=o&&$("."+s.value).attr("style",o),null!=l&&1==l?($("#"+s.key).removeClass(s.key).addClass(s.key+"-hover"),$("."+s.value).hide()):$("."+s.value).show()}}},swc:function(a,t){$(".switch-area").on("click","#"+a,function(){return UIF.handler.login?(r.setCookie(a+"-cook",1,86400),$("."+t).toggle(),void($("."+t).is(":hidden")?$(this).addClass(a+"-hover").removeClass(a):(r.setCookie(a+"-cook",0,86400),$(this).addClass(a).removeClass(a+"-hover")))):void UIF.handler.loging()})},init:function(){var a=this;if($("#sendChatBtn").removeAttr("disabled"),$("#msgContent").removeAttr("disabled"),a.container=$(".nav-left .nl-login .main-title .infoBox"),a.container2=$(".newGifts .portraits"),a.container.find(".kb").text(r.nreplace(a.data.coins)),a.container.find(".mtname").text(decodeURI(a.data.nickname)),a.container.find(".mt-inner").width(a.data.sppes+"%"),a.container.find(".mtlevel").html('<span class="sprite consumelevel-pic_consumelevel_'+a.data.splev+'"></span>'),null!=a.data.actlev&&""!=a.data.actlev&&a.container2.find(".circleLevel").addClass(a.data.actimg),void 0!=UIF.radials&&null!=UIF.radials&&UIF.radials.value(Number(a.data.actpes)),null!=a.data.packs&&a.data.packs.length>0){if(a.data.packs=jQuery.parseJSON(a.data.packs),null!=a.data.packs.gift&&a.data.packs.gift.length>0)for(var t=a.data.packs.gift,e=0;e<t.length;e++)t[e].num>0&&$("#giftList28 ."+t[e].giftId).removeClass("hideli"),$("#giftList28 ."+t[e].giftId).attr("giftNum",t[e].num);null!=a.data.packs&&null!=a.data.packs.isread&&1==a.data.packs.isread&&a.data.packs.gift.length>0&&$(".giftHeader span:last").addClass("redot"),$("#giftList28 ."+a.data.packs.giftId).attr("giftNum",a.data.packs.num)}if(null!=a.data.giftStar){var s=a.data.giftStar;UIF.handler.isAdd=!0,r.setCookie("fi_num",s.star,86400),$(".giftLists ul:first #gift"+s.giftId).find(".first-nus").length>0?$(".giftLists ul:first #gift"+s.giftId).find(".first-nus").text(s.star):$(".giftLists ul:first #gift"+s.giftId).append('<span class="first-nus">'+s.star+"</span>"),$(".giftLists ul:first #gift"+s.giftId).addClass("fi")}if($("#closing").hide(),null!=a.data.roles&&a.data.roles.length>0){var l=jQuery.parseJSON(a.data.roles);r.arrayContains(l,100)&&$("#closing").show(),r.arrayContains(l,101)&&($("#sendChatBtn").attr("disabled",!0),$("#msgContent").attr("disabled",!0))}if(a.data.isAnchor){var o='<div class="setting" id="setting">设置</div>';$(".live-info").append(o),$(".self-care").hide()}a.data.isFollows&&($(".followout").show(),$(".followme").hide()),null!=a.data.levs&&a.data.levs.length>0&&(UIF.handler.cache.remove(i.USER_HEADIMAG),UIF.handler.cache.put(i.USER_HEADIMAG,a.data.levs)),null!=a.data.roles&&a.data.roles.length>0&&(UIF.handler.cache.remove(i.USER_HEADROLES),UIF.handler.cache.put(i.USER_HEADROLES,a.data.roles));var d=UIF.handler.cache.get(i.USER_HEADINFOS),c=UIF.handler.cache.get(i.ANCHOR_HEADINFOS);null!=d&&(null!=d.actlev&&null!=a.data.actlev&&a.data.actlev>d.actlev&&n.actGift({himage:a.data.himage,actlev:a.data.actlev}),null!=d.cohesion&&null!=a.data.cohesion&&a.data.cohesion>d.cohesion&&n.cohGift({himage:a.data.himage,cohlevel:a.data.cohesion,anhimg:c.avatar}),null!=d.splev&&null!=a.data.splev&&a.data.splev>=6&&a.data.splev>d.splev&&UIF.handler.upgrade({nickname:a.data.nickname,splev:a.data.splev,actions:"upgrade"},function(a){})),UIF.handler.cache.remove(i.USER_HEADINFOS),UIF.handler.cache.put(i.USER_HEADINFOS,a.data)}}});