define(function(a,e,s){a("jquery");var l=a("anchor-tools");s.exports={mo:function(){$(".live-video #video").html(this.bg()),$(".live-video #video #bglis").append(this.childBg()),$(".live-video #video .no-live-text").text("正在加载中")},stat:function(a){UIF.handler.anchorId!=UIF.handler.userId&&(null!=a&&null!=a.online&&a.online?$(".live-video #video").html(this.player()):($(".live-video #video").html(this.bg()),$(".live-video #video #bglis").append(this.childBg()),$(".live-video #video .no-live-text").text("主播已下播")))},init:function(a){var e=a.data;e.anchors&&200==e.status&&UIF.handler.anchorId==UIF.handler.userId?$(".live-video #video").html(this.record()):e.online&&200==e.status&&UIF.handler.anchorId!=UIF.handler.userId?$(".live-video #video").html(this.player()):($(".live-video #video").html(this.bg()),$(".live-video #video #bglis").append(this.childBg()),"success"==e.messag&&(e.messag="主播未开播"),$(".live-video #video .no-live-text").text(e.messag))},record:function(){var a=new Array,e=UIF.handler.token,s=UIF.handler.flash,l=UIF.handler.roomNumber;return a.push(' <div class="flash-area">'),a.push('<div id="mwin1">'),a.push(" <!--<![endif]-->"),a.push('<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="player" name="player" align="middle">'),a.push('<param name="movie" value="/js/sea-modules/swf/record.swf?'+UIF.version+'">'),a.push('<param name="flashvars" value="chat=1&amp;usernumber='+l+"&amp;roomnumber="+l+"&amp;c="+e+"&amp;mtadd="+s+'">'),a.push('<param name="quality" value="high">'),a.push('<param name="wmode" value="transparent">'),a.push('<param name="allowScriptAccess" value="always">'),a.push('<param name="allowfullscreen" value="true">'),a.push("<!--[if !IE]>-->"),a.push('<object type="application/x-shockwave-flash" data="/js/sea-modules/swf/record.swf?'+UIF.version+'" id="player" name="player">'),a.push('<param name="movie" value="/js/sea-modules/swf/record.swf?'+UIF.version+'">'),a.push('<param name="flashvars" value="chat=1&amp;usernumber='+userId+"&amp;roomnumber="+l+"&amp;c="+e+"&amp;mtadd="+s+'">'),a.push('<param name="quality" value="high">'),a.push('<param name="wmode" value="transparent">'),a.push('<param name="allowScriptAccess" value="always">'),a.push('<param name="allowfullscreen" value="true">'),a.push("<!--<![endif]-->"),a.push('<a href="http://www.adobe.com/go/getflash">'),a.push('<img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player">'),a.push("</a>"),a.push("<!--[if !IE]>-->"),a.push("</object>"),a.push("<!--<![endif]-->"),a.push("</object>"),a.push("</div>"),a.push("</div>"),a.join("")},player:function(){var a=new Array,e=UIF.handler.flash,s=UIF.handler.roomNumber;return a.push(' <div class="flash-area">'),a.push('<div id="mwin1">'),a.push(" <!--<![endif]-->"),a.push('<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"  id="player" name="player" align="middle">'),a.push('<param name="movie" value="/js/sea-modules/swf/player.swf?'+UIF.version+'">'),a.push('<param name="flashvars" value="token=&amp;chat=1&amp;roomnumber='+s+"&amp;fn="+s+"&amp;mtadd="+e+'">'),a.push('<param name="quality" value="high">'),a.push('<param name="wmode" value="transparent">'),a.push('<param name="allowScriptAccess" value="always">'),a.push('<param name="allowfullscreen" value="true">'),a.push("<!--[if !IE]>-->"),a.push('<object type="application/x-shockwave-flash" data="/js/sea-modules/swf/player.swf?'+UIF.version+'" id="player" name="player">'),a.push('<param name="movie" value="/js/sea-modules/swf/player.swf?'+UIF.version+'">'),a.push('<param name="flashvars" value="token=&amp;chat=1&amp;roomnumber='+s+"&amp;fn="+s+"&amp;mtadd="+e+'">'),a.push('<param name="quality" value="high">'),a.push('<param name="wmode" value="transparent">'),a.push('<param name="allowScriptAccess" value="always">'),a.push('<param name="allowfullscreen" value="true">'),a.push("<!--<![endif]-->"),a.push('<a href="http://www.adobe.com/go/getflash">'),a.push('<img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player">'),a.push("</a>"),a.push("<!--[if !IE]>-->"),a.push("</object>"),a.push("<!--<![endif]-->"),a.push("</object>"),a.push("</div>"),a.push("</div>"),a.join("")},bg:function(){var a=new Array;return a.push('<div class="no-live">'),a.push('<div class="no-live-text">主播未开播</div>'),a.push('<div class="no-live-next">下次开播时间：<span class="no-live-week">星期五</span>&nbsp;&nbsp;&nbsp;<span class="no-live-time">19:20</span></div>'),a.push('<ul id="bglis">'),a.push("</ul>"),a.push("</div>"),a.join("")},childBg:function(){var a=new Array;a.push("<li>"),a.push('<a href="{0}"></a>'),a.push('<div class="noanchor-kuang">'),a.push('<div class="nocnchor-k bk-color"></div>'),a.push('<img src="{1}" alt="{2}">'),a.push("</div>"),a.push('<div class="noanchor-info">'),a.push('<div class="noanchor-level anchor-level {3}"></div>'),a.push('<div class="noanchor-name">{4}</div>'),a.push('<div class="clear"></div>'),a.push('<div class="noanchor-num">{5}</div>'),a.push("</div>"),a.push("</li>");var e=new Array;return $.ajax({type:"post",url:"/rest/site/ats.mt",data:"roomNumber="+UIF.handler.roomNumber,async:!1,success:function(s){200==s.resultStatus&&null!=s.data&&s.data.forEach(function(s){var n=a.join(""),r=l.stringFormat("{0} 在线",s.numbers);0==s.numbers&&(r=" 离线");var i=l.stringFormat(n,s.roomNumber,s.image,decodeURIComponent(s.nickName),s.levelImg,decodeURIComponent(s.nickName),r);e.push(i)})}}),$.ajax({type:"post",url:"/rest/site/atsTime.mt",data:"roomNumber="+UIF.handler.roomNumber,async:!1,success:function(a){200==a.resultStatus&&null!=a.data&&($(".no-live-week").text(a.data[0]),$(".no-live-time").text(a.data[1]),$(".no-live-next").show())}}),e.join("")}}});